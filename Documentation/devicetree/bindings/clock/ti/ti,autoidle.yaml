# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/clock/ti/ti,autoidle.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: TI autoidle clock

maintainers:
  - Tero Kristo <kristo@kernel.org>
  - Sukrut Bellary <sbellary@baylibre.com>

description: |
  In TI SoC, some of the clocks support autoidle feature.
  It assumes a register mapped clock which can be put to idle automatically
  by hardware based on the usage and a configuration bit setting.
  Autoidle clock is never an individual clock, it is always a derivative
  of some basic clock like a gate, divider or fixed-factor.

properties:
  reg:
    maxItems: 1

  ti,autoidle-shift:
    $ref: /schemas/types.yaml#/definitions/uint32
    description:
      bit shift of the autoidle enable bit for the clock
    maximum: 31
    default: 0

  ti,invert-autoidle-bit:
    type: boolean
    description:
      autoidle is enabled by setting the bit to 0

additionalProperties: true

examples:
  - |
    bus {
      #address-cells = <1>;
      #size-cells = <0>;

      clock@1b4 {
        reg = <0x01b4>;
        ti,autoidle-shift = <8>;
        ti,invert-autoidle-bit;
      };
    };
